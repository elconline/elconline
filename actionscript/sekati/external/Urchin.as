/** * sekati.external.Urchin * @version 1.1.0 * @author jason m horwitz | sekati.com * Copyright (C) 2008 jason m horwitz, Sekat LLC. All Rights Reserved. * Released under the MIT License: http://www.opensource.org/licenses/mit-license.php */package sekati.external {	import flash.external.ExternalInterface;	import sekati.core.App;	import sekati.external.ExternalBase;	import sekati.log.Logger;		/**	 * Google Analytics (Urchin) tracking of Flash events.	 *  	 * @example Add google analytics javascript to your swf's html document:<listing version="3.0">	 * &lt;script src="http://www.google-analytics.com/urchin.js" type="text/javascript"&gt;&lt;/script&gt;	 * &lt;script type="text/javascript"&gt;	 * _uacct = "UA-000000-0"; &lt;!-- Insert your GA site account number --&gt;	 * urchinTracker();	 * &lt;/script&gt;	 * </listing>	 * 	 * @example Enable swLiveConnect:	 * <listing version="3.0">flash.system.fscommand( "swLiveConnect", "true" );</listing>	 * 	 * @example Make your initial tracking call:	 * <listing version="3.0">Urchin.track( "home" );</listing>	 * 	 * @see http://www.google.com/support/analytics/bin/answer.py?answer=27243&hl=en	 */	public class Urchin {		/*** @private */		public static const URCHIN_METHOD : String = 'urchinTracker';				/*** @private */		protected static var _base : String = '/flash/';		/**		 * Indicates the flash sites Urchin tracking base.		 * @example <listing version="3.0">		 * 	Urchin.base = "homepage"; // set optional webroot		 * </listing>		 * @default "flash"		 */		public static function get base() : String {			return _base;		}		/**		 * @private		 */		public static function set base(base : String) : void {			_base = (base) ? '/' + base + '/' : _base;		}		/**		 * Track a page event.		 * @example <listing version="3.0">		 * 	Urchin.track("projects"); 			// register '/homepage/projects'		 * 	Urchin.track("projects/page1"); 	// register '/homepage/projects/page1'		 * </listing>		 */		public static function track(pg : String) : void {			if( App.TRACK_ENABLE && ExternalBase.isExternal( URCHIN_METHOD ) ) {				try {					var pv : String = _base + pg;					Logger.$.info( Urchin, "* Urchin.track ('" + pv + "')" );					ExternalInterface.call( URCHIN_METHOD, pv );				} catch (e : Error) {					Logger.$.error( Urchin, "!!! - Urchin.track ('" + pv + "') => " + e.message );				}			} else {				Logger.$.warn( Urchin, "!!! - Tracking requirements not met: config.xml tracking disabled or the External object is not available in Browser." );				}		}		/**		 * Urchin Static Constructor		 */		public function Urchin() {			throw new Error( "Urchin is a static class and cannot be instantiated." );		}	}}