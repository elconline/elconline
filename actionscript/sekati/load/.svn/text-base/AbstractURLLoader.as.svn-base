/** * sekati.load.AbstractURLLoader * @version 1.0.0 * @author jason m horwitz | sekati.com * Copyright (C) 2008  jason m horwitz, Sekat LLC. All Rights Reserved. * Released under the MIT License: http://www.opensource.org/licenses/mit-license.php */package sekati.load {	import flash.events.Event;	import flash.events.HTTPStatusEvent;	import flash.events.IOErrorEvent;	import flash.events.ProgressEvent;	import flash.events.SecurityErrorEvent;	import flash.net.URLLoader;	import flash.net.URLRequest;		/**	 * AbstractURLLoader provides a common URLLoader API for textual data transports.	 * 	 * @example <listing version="3.0">	 * 	 * </listing>	 */	public class AbstractURLLoader extends URLLoader {		public var request : URLRequest;		protected var RETRY_ATTEMPT : uint = 0;		protected var RETRY_MAX : uint;			/**		 * AbstractURLLoader Constructor		 * @param maxRetryAttempts 	Number of times to retry each method in bootstrap before fatal error.		 */		public function AbstractURLLoader(request : URLRequest = null, init : Boolean = true, retries : uint = 5) {			this.request = request;			RETRY_MAX = retries;			configureListeners( true );			if (init && request) {				load( request );				}		}		/**		 * Load the xml document defined in the constructor.		 */		/* 		override public function load( request : URLRequest = null ) : void {			try {				super.load( request );                			} catch ( e : Error ) {				trace( "Unable to load requested document: " + e.message );			}		}			*/				protected function configureListeners(isAdd : Boolean ) : void {			var listenAction : String = (!isAdd) ? 'addEventListener' : 'removeEventListener';			this[listenAction]( Event.COMPLETE, completeHandler );			this[listenAction]( Event.OPEN, openHandler );			this[listenAction]( ProgressEvent.PROGRESS, progressHandler );			this[listenAction]( SecurityErrorEvent.SECURITY_ERROR, securityErrorHandler );			this[listenAction]( HTTPStatusEvent.HTTP_STATUS, httpStatusHandler );			this[listenAction]( IOErrorEvent.IO_ERROR, ioErrorHandler );		}		// HANDLERS				/**		 * Dispatch the XMLEvent.ON_READY event along with the xml data.		 */		protected function completeHandler(event : Event) : void {			configureListeners( false );			//var e : XMLEvent = new XMLEvent( XMLEvent.ON_READY, _xml );			//dispatchEvent( e );		}		protected function openHandler(e : Event) : void {        	//trace("openHandler: " + e);		}		protected function progressHandler(e : ProgressEvent) : void {        	//trace("progressHandler loaded:" + e.bytesLoaded + " total: " + e.bytesTotal);		}		protected function securityErrorHandler(e : SecurityErrorEvent) : void {            //trace("securityErrorHandler: " + e);		}		protected function httpStatusHandler(e : HTTPStatusEvent) : void {            //trace("httpStatusHandler: " + e);		}		protected function ioErrorHandler(e : IOErrorEvent) : void {            //trace("ioErrorHandler: " + e);		}								}}